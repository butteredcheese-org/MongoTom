<!DOCTYPE html>
<html>
  
  <style>
    body {
      background-color: #f2f2f2;
      font-family: Arial, Helvetica, sans-serif;
    }
    h1 {
      color: #4d4d4d;
      text-align: center;
    }
    p {
      color: #4d4d4d;
      text-align: center;
    }
  </style>

  <head>
    <title>Generated text</title>
  </head>
  <body>
    <h1>Generated text:</h1>
    <p id="outputtext">{{ generated_text }}</p>
  </body>
  <script>
    const synth = window.speechSynthesis;

    const inputTxt = document.querySelector("#outputtext");

    window.onload = function() {
        console.log(inputTxt.innerHTML);
        speak();
      };
    
    function speak() {
      if (synth.speaking) {
        console.error("speechSynthesis.speaking");
        return;
      }
    
      if (inputTxt.value !== "") {
        const utterThis = new SpeechSynthesisUtterance(inputTxt.innerHTML);
    
        utterThis.onend = function (event) {
          console.log("SpeechSynthesisUtterance.onend");
        };
    
        utterThis.onerror = function (event) {
          console.error("SpeechSynthesisUtterance.onerror");
        };
        

        utterThis.voice = synth.getVoices()[1];
        utterThis.pitch = 1;
        utterThis.rate = 1;
        synth.speak(utterThis);
      }
    }
    
    </script>
</html>
